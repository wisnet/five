{"version":3,"sources":["/Users/riad/Workspace/a8c/gutenberg/packages/components/src/dropdown-menu/index.js"],"names":["classnames","flatMap","DOWN","IconButton","Dropdown","NavigableMenu","DropdownMenu","icon","label","menuLabel","controls","className","length","controlSets","Array","isArray","isOpen","onToggle","openOnArrowDown","event","keyCode","preventDefault","stopPropagation","onClose","controlSet","indexOfSet","map","control","indexOfControl","join","onClick","isActive","isDisabled","title"],"mappings":"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","sourcesContent":["/**\n * External dependencies\n */\nimport classnames from 'classnames';\nimport { flatMap } from 'lodash';\n\n/**\n * WordPress dependencies\n */\nimport { DOWN } from '@wordpress/keycodes';\n\n/**\n * Internal dependencies\n */\nimport IconButton from '../icon-button';\nimport Dropdown from '../dropdown';\nimport { NavigableMenu } from '../navigable-container';\n\nfunction DropdownMenu( {\n\ticon = 'menu',\n\tlabel,\n\tmenuLabel,\n\tcontrols,\n\tclassName,\n} ) {\n\tif ( ! controls || ! controls.length ) {\n\t\treturn null;\n\t}\n\n\t// Normalize controls to nested array of objects (sets of controls)\n\tlet controlSets = controls;\n\tif ( ! Array.isArray( controlSets[ 0 ] ) ) {\n\t\tcontrolSets = [ controlSets ];\n\t}\n\n\treturn (\n\t\t<Dropdown\n\t\t\tclassName={ classnames( 'components-dropdown-menu', className ) }\n\t\t\tcontentClassName=\"components-dropdown-menu__popover\"\n\t\t\trenderToggle={ ( { isOpen, onToggle } ) => {\n\t\t\t\tconst openOnArrowDown = ( event ) => {\n\t\t\t\t\tif ( ! isOpen && event.keyCode === DOWN ) {\n\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t\tevent.stopPropagation();\n\t\t\t\t\t\tonToggle();\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\treturn (\n\t\t\t\t\t<IconButton\n\t\t\t\t\t\tclassName=\"components-dropdown-menu__toggle\"\n\t\t\t\t\t\ticon={ icon }\n\t\t\t\t\t\tonClick={ onToggle }\n\t\t\t\t\t\tonKeyDown={ openOnArrowDown }\n\t\t\t\t\t\taria-haspopup=\"true\"\n\t\t\t\t\t\taria-expanded={ isOpen }\n\t\t\t\t\t\tlabel={ label }\n\t\t\t\t\t\ttooltip={ label }\n\t\t\t\t\t>\n\t\t\t\t\t\t<span className=\"components-dropdown-menu__indicator\" />\n\t\t\t\t\t</IconButton>\n\t\t\t\t);\n\t\t\t} }\n\t\t\trenderContent={ ( { onClose } ) => {\n\t\t\t\treturn (\n\t\t\t\t\t<NavigableMenu\n\t\t\t\t\t\tclassName=\"components-dropdown-menu__menu\"\n\t\t\t\t\t\trole=\"menu\"\n\t\t\t\t\t\taria-label={ menuLabel }\n\t\t\t\t\t>\n\t\t\t\t\t\t{ flatMap( controlSets, ( controlSet, indexOfSet ) => (\n\t\t\t\t\t\t\tcontrolSet.map( ( control, indexOfControl ) => (\n\t\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\t\tkey={ [ indexOfSet, indexOfControl ].join() }\n\t\t\t\t\t\t\t\t\tonClick={ ( event ) => {\n\t\t\t\t\t\t\t\t\t\tevent.stopPropagation();\n\t\t\t\t\t\t\t\t\t\tonClose();\n\t\t\t\t\t\t\t\t\t\tif ( control.onClick ) {\n\t\t\t\t\t\t\t\t\t\t\tcontrol.onClick();\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\t\t\tclassName={ classnames(\n\t\t\t\t\t\t\t\t\t\t'components-dropdown-menu__menu-item',\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t'has-separator': indexOfSet > 0 && indexOfControl === 0,\n\t\t\t\t\t\t\t\t\t\t\t'is-active': control.isActive,\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t\ticon={ control.icon }\n\t\t\t\t\t\t\t\t\trole=\"menuitem\"\n\t\t\t\t\t\t\t\t\tdisabled={ control.isDisabled }\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{ control.title }\n\t\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t\t) )\n\t\t\t\t\t\t) ) }\n\t\t\t\t\t</NavigableMenu>\n\t\t\t\t);\n\t\t\t} }\n\t\t/>\n\t);\n}\n\nexport default DropdownMenu;\n"]}