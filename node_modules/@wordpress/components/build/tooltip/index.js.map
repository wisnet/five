{"version":3,"sources":["/Users/riad/Workspace/a8c/gutenberg/packages/components/src/tooltip/index.js"],"names":["TOOLTIP_DELAY","Tooltip","arguments","delayedSetIsOver","isOver","setState","state","cancel","eventName","event","children","props","Children","count","child","only","isDelayed","emitToChild","currentTarget","disabled","type","position","text","shortcut","process","env","NODE_ENV","console","error","onMouseEnter","createToggleIsOver","onMouseLeave","onClick","onFocus","onBlur","Component"],"mappings":"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","sourcesContent":["/**\n * External dependencies\n */\nimport { debounce, includes } from 'lodash';\n\n/**\n * WordPress dependencies\n */\nimport {\n\tComponent,\n\tChildren,\n\tcloneElement,\n\tconcatChildren,\n} from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport Popover from '../popover';\nimport Shortcut from '../shortcut';\n\n/**\n * Time over children to wait before showing tooltip\n *\n * @type {Number}\n */\nconst TOOLTIP_DELAY = 700;\n\nclass Tooltip extends Component {\n\tconstructor() {\n\t\tsuper( ...arguments );\n\n\t\tthis.delayedSetIsOver = debounce(\n\t\t\t( isOver ) => this.setState( { isOver } ),\n\t\t\tTOOLTIP_DELAY\n\t\t);\n\n\t\tthis.state = {\n\t\t\tisOver: false,\n\t\t};\n\t}\n\n\tcomponentWillUnmount() {\n\t\tthis.delayedSetIsOver.cancel();\n\t}\n\n\temitToChild( eventName, event ) {\n\t\tconst { children } = this.props;\n\t\tif ( Children.count( children ) !== 1 ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst child = Children.only( children );\n\t\tif ( typeof child.props[ eventName ] === 'function' ) {\n\t\t\tchild.props[ eventName ]( event );\n\t\t}\n\t}\n\n\tcreateToggleIsOver( eventName, isDelayed ) {\n\t\treturn ( event ) => {\n\t\t\t// Preserve original child callback behavior\n\t\t\tthis.emitToChild( eventName, event );\n\n\t\t\t// Mouse events behave unreliably in React for disabled elements,\n\t\t\t// firing on mouseenter but not mouseleave.  Further, the default\n\t\t\t// behavior for disabled elements in some browsers is to ignore\n\t\t\t// mouse events. Don't bother trying to to handle them.\n\t\t\t//\n\t\t\t// See: https://github.com/facebook/react/issues/4251\n\t\t\tif ( event.currentTarget.disabled ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Needed in case unsetting is over while delayed set pending, i.e.\n\t\t\t// quickly blur/mouseleave before delayedSetIsOver is called\n\t\t\tthis.delayedSetIsOver.cancel();\n\n\t\t\tconst isOver = includes( [ 'focus', 'mouseenter' ], event.type );\n\t\t\tif ( isOver === this.state.isOver ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif ( isDelayed ) {\n\t\t\t\tthis.delayedSetIsOver( isOver );\n\t\t\t} else {\n\t\t\t\tthis.setState( { isOver } );\n\t\t\t}\n\t\t};\n\t}\n\n\trender() {\n\t\tconst { children, position, text, shortcut } = this.props;\n\t\tif ( Children.count( children ) !== 1 ) {\n\t\t\tif ( 'development' === process.env.NODE_ENV ) {\n\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\tconsole.error( 'Tooltip should be called with only a single child element.' );\n\t\t\t}\n\n\t\t\treturn children;\n\t\t}\n\n\t\tconst child = Children.only( children );\n\t\tconst { isOver } = this.state;\n\t\treturn cloneElement( child, {\n\t\t\tonMouseEnter: this.createToggleIsOver( 'onMouseEnter', true ),\n\t\t\tonMouseLeave: this.createToggleIsOver( 'onMouseLeave' ),\n\t\t\tonClick: this.createToggleIsOver( 'onClick' ),\n\t\t\tonFocus: this.createToggleIsOver( 'onFocus' ),\n\t\t\tonBlur: this.createToggleIsOver( 'onBlur' ),\n\t\t\tchildren: concatChildren(\n\t\t\t\tchild.props.children,\n\t\t\t\tisOver && (\n\t\t\t\t\t<Popover\n\t\t\t\t\t\tfocusOnMount={ false }\n\t\t\t\t\t\tposition={ position }\n\t\t\t\t\t\tclassName=\"components-tooltip\"\n\t\t\t\t\t\taria-hidden=\"true\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{ text }\n\t\t\t\t\t\t<Shortcut className=\"components-tooltip__shortcut\" shortcut={ shortcut } />\n\t\t\t\t\t</Popover>\n\t\t\t\t),\n\t\t\t),\n\t\t} );\n\t}\n}\n\nexport default Tooltip;\n"]}