{"version":3,"sources":["/Users/riad/Workspace/a8c/gutenberg/packages/blocks/src/api/raw-handling/is-inline-content.js"],"names":["isInline","node","contextTag","tag","nodeName","toLowerCase","inlineWhitelistTagGroups","some","tagGroup","length","deepCheck","nodes","every","Array","from","children","isDoubleBR","previousSibling","HTML","doc","document","implementation","createHTMLDocument","body","innerHTML"],"mappings":";;;;;;;AAGA;;AAKA;;AARA;;;;AAKA;;;;AAKA;;;;;;;;;AASA,SAASA,QAAT,CAAmBC,IAAnB,EAAyBC,UAAzB,EAAsC;AACrC,MAAK,wCAAmBD,IAAnB,CAAL,EAAiC;AAChC,WAAO,IAAP;AACA;;AAED,MAAK,CAAEC,UAAP,EAAoB;AACnB,WAAO,KAAP;AACA;;AAED,MAAMC,GAAG,GAAGF,IAAI,CAACG,QAAL,CAAcC,WAAd,EAAZ;AACA,MAAMC,wBAAwB,GAAG,CAChC,CAAE,IAAF,EAAQ,IAAR,EAAc,IAAd,CADgC,EAEhC,CAAE,IAAF,EAAQ,IAAR,EAAc,IAAd,EAAoB,IAApB,EAA0B,IAA1B,EAAgC,IAAhC,CAFgC,CAAjC;AAKA,SAAOA,wBAAwB,CAACC,IAAzB,CAA+B,UAAEC,QAAF;AAAA,WACrC,wBAAY,CAAEL,GAAF,EAAOD,UAAP,CAAZ,EAAiCM,QAAjC,EAA4CC,MAA5C,KAAuD,CADlB;AAAA,GAA/B,CAAP;AAGA;;AAED,SAASC,SAAT,CAAoBC,KAApB,EAA2BT,UAA3B,EAAwC;AACvC,SAAOS,KAAK,CAACC,KAAN,CAAa,UAAEX,IAAF;AAAA,WACnBD,QAAQ,CAAEC,IAAF,EAAQC,UAAR,CAAR,IAAgCQ,SAAS,CAAEG,KAAK,CAACC,IAAN,CAAYb,IAAI,CAACc,QAAjB,CAAF,EAA+Bb,UAA/B,CADtB;AAAA,GAAb,CAAP;AAGA;;AAED,SAASc,UAAT,CAAqBf,IAArB,EAA4B;AAC3B,SAAOA,IAAI,CAACG,QAAL,KAAkB,IAAlB,IAA0BH,IAAI,CAACgB,eAA/B,IAAkDhB,IAAI,CAACgB,eAAL,CAAqBb,QAArB,KAAkC,IAA3F;AACA;;AAEc,kBAAUc,IAAV,EAAgBhB,UAAhB,EAA6B;AAC3C,MAAMiB,GAAG,GAAGC,QAAQ,CAACC,cAAT,CAAwBC,kBAAxB,CAA4C,EAA5C,CAAZ;AAEAH,EAAAA,GAAG,CAACI,IAAJ,CAASC,SAAT,GAAqBN,IAArB;AAEA,MAAMP,KAAK,GAAGE,KAAK,CAACC,IAAN,CAAYK,GAAG,CAACI,IAAJ,CAASR,QAArB,CAAd;AAEA,SAAO,CAAEJ,KAAK,CAACJ,IAAN,CAAYS,UAAZ,CAAF,IAA8BN,SAAS,CAAEC,KAAF,EAAST,UAAT,CAA9C;AACA","sourcesContent":["/**\n * External dependencies\n */\nimport { difference } from 'lodash';\n\n/**\n * Internal dependencies\n */\nimport { isPhrasingContent } from './phrasing-content';\n\n/**\n * Checks if the given node should be considered inline content, optionally\n * depending on a context tag.\n *\n * @param {Node}   node       Node name.\n * @param {string} contextTag Tag name.\n *\n * @return {boolean} True if the node is inline content, false if nohe.\n */\nfunction isInline( node, contextTag ) {\n\tif ( isPhrasingContent( node ) ) {\n\t\treturn true;\n\t}\n\n\tif ( ! contextTag ) {\n\t\treturn false;\n\t}\n\n\tconst tag = node.nodeName.toLowerCase();\n\tconst inlineWhitelistTagGroups = [\n\t\t[ 'ul', 'li', 'ol' ],\n\t\t[ 'h1', 'h2', 'h3', 'h4', 'h5', 'h6' ],\n\t];\n\n\treturn inlineWhitelistTagGroups.some( ( tagGroup ) =>\n\t\tdifference( [ tag, contextTag ], tagGroup ).length === 0\n\t);\n}\n\nfunction deepCheck( nodes, contextTag ) {\n\treturn nodes.every( ( node ) =>\n\t\tisInline( node, contextTag ) && deepCheck( Array.from( node.children ), contextTag )\n\t);\n}\n\nfunction isDoubleBR( node ) {\n\treturn node.nodeName === 'BR' && node.previousSibling && node.previousSibling.nodeName === 'BR';\n}\n\nexport default function( HTML, contextTag ) {\n\tconst doc = document.implementation.createHTMLDocument( '' );\n\n\tdoc.body.innerHTML = HTML;\n\n\tconst nodes = Array.from( doc.body.children );\n\n\treturn ! nodes.some( isDoubleBR ) && deepCheck( nodes, contextTag );\n}\n"]}