{"version":3,"sources":["/Users/riad/Workspace/a8c/gutenberg/packages/blocks/src/api/raw-handling/phrasing-content-reducer.js"],"names":["isBlockContent","node","schema","hasOwnProperty","nodeName","toLowerCase","doc","style","fontWeight","fontStyle","textDecorationLine","verticalAlign","createElement","target","rel","removeAttribute","hasChildNodes","Array","from","childNodes","some","child"],"mappings":";;;;;;;AAGA;;AAKA;;AARA;;;;AAKA;;;AAKA,SAASA,cAAT,CAAyBC,IAAzB,EAA6C;AAAA,MAAdC,MAAc,uEAAL,EAAK;AAC5C,SAAOA,MAAM,CAACC,cAAP,CAAuBF,IAAI,CAACG,QAAL,CAAcC,WAAd,EAAvB,CAAP;AACA;;AAEc,kBAAUJ,IAAV,EAAgBK,GAAhB,EAAqBJ,MAArB,EAA8B;AAC5C,MAAKD,IAAI,CAACG,QAAL,KAAkB,MAAvB,EAAgC;AAAA,sBAM3BH,IAAI,CAACM,KANsB;AAAA,QAE9BC,UAF8B,eAE9BA,UAF8B;AAAA,QAG9BC,SAH8B,eAG9BA,SAH8B;AAAA,QAI9BC,kBAJ8B,eAI9BA,kBAJ8B;AAAA,QAK9BC,aAL8B,eAK9BA,aAL8B;;AAQ/B,QAAKH,UAAU,KAAK,MAAf,IAAyBA,UAAU,KAAK,KAA7C,EAAqD;AACpD,qBAAMF,GAAG,CAACM,aAAJ,CAAmB,QAAnB,CAAN,EAAqCX,IAArC;AACA;;AAED,QAAKQ,SAAS,KAAK,QAAnB,EAA8B;AAC7B,qBAAMH,GAAG,CAACM,aAAJ,CAAmB,IAAnB,CAAN,EAAiCX,IAAjC;AACA;;AAED,QAAKS,kBAAkB,KAAK,cAA5B,EAA6C;AAC5C,qBAAMJ,GAAG,CAACM,aAAJ,CAAmB,KAAnB,CAAN,EAAkCX,IAAlC;AACA;;AAED,QAAKU,aAAa,KAAK,OAAvB,EAAiC;AAChC,qBAAML,GAAG,CAACM,aAAJ,CAAmB,KAAnB,CAAN,EAAkCX,IAAlC;AACA,KAFD,MAEO,IAAKU,aAAa,KAAK,KAAvB,EAA+B;AACrC,qBAAML,GAAG,CAACM,aAAJ,CAAmB,KAAnB,CAAN,EAAkCX,IAAlC;AACA;AACD,GAzBD,MAyBO,IAAKA,IAAI,CAACG,QAAL,KAAkB,GAAvB,EAA6B;AACnCH,IAAAA,IAAI,GAAG,qBAAYA,IAAZ,EAAkB,QAAlB,CAAP;AACA,GAFM,MAEA,IAAKA,IAAI,CAACG,QAAL,KAAkB,GAAvB,EAA6B;AACnCH,IAAAA,IAAI,GAAG,qBAAYA,IAAZ,EAAkB,IAAlB,CAAP;AACA,GAFM,MAEA,IAAKA,IAAI,CAACG,QAAL,KAAkB,GAAvB,EAA6B;AACnC,QAAKH,IAAI,CAACY,MAAL,CAAYR,WAAZ,OAA8B,QAAnC,EAA8C;AAC7CJ,MAAAA,IAAI,CAACa,GAAL,GAAW,qBAAX;AACA,KAFD,MAEO;AACNb,MAAAA,IAAI,CAACc,eAAL,CAAsB,QAAtB;AACAd,MAAAA,IAAI,CAACc,eAAL,CAAsB,KAAtB;AACA;AACD;;AAED,MACC,wCAAmBd,IAAnB,KACAA,IAAI,CAACe,aAAL,EADA,IAEAC,KAAK,CAACC,IAAN,CAAYjB,IAAI,CAACkB,UAAjB,EAA8BC,IAA9B,CAAoC,UAAEC,KAAF;AAAA,WAAarB,cAAc,CAAEqB,KAAF,EAASnB,MAAT,CAA3B;AAAA,GAApC,CAHD,EAIE;AACD,qBAAQD,IAAR;AACA;AACD","sourcesContent":["/**\n * WordPress dependencies\n */\nimport { wrap, unwrap, replaceTag } from '@wordpress/dom';\n\n/**\n * Internal dependencies\n */\nimport { isPhrasingContent } from './phrasing-content';\n\nfunction isBlockContent( node, schema = {} ) {\n\treturn schema.hasOwnProperty( node.nodeName.toLowerCase() );\n}\n\nexport default function( node, doc, schema ) {\n\tif ( node.nodeName === 'SPAN' ) {\n\t\tconst {\n\t\t\tfontWeight,\n\t\t\tfontStyle,\n\t\t\ttextDecorationLine,\n\t\t\tverticalAlign,\n\t\t} = node.style;\n\n\t\tif ( fontWeight === 'bold' || fontWeight === '700' ) {\n\t\t\twrap( doc.createElement( 'strong' ), node );\n\t\t}\n\n\t\tif ( fontStyle === 'italic' ) {\n\t\t\twrap( doc.createElement( 'em' ), node );\n\t\t}\n\n\t\tif ( textDecorationLine === 'line-through' ) {\n\t\t\twrap( doc.createElement( 'del' ), node );\n\t\t}\n\n\t\tif ( verticalAlign === 'super' ) {\n\t\t\twrap( doc.createElement( 'sup' ), node );\n\t\t} else if ( verticalAlign === 'sub' ) {\n\t\t\twrap( doc.createElement( 'sub' ), node );\n\t\t}\n\t} else if ( node.nodeName === 'B' ) {\n\t\tnode = replaceTag( node, 'strong' );\n\t} else if ( node.nodeName === 'I' ) {\n\t\tnode = replaceTag( node, 'em' );\n\t} else if ( node.nodeName === 'A' ) {\n\t\tif ( node.target.toLowerCase() === '_blank' ) {\n\t\t\tnode.rel = 'noreferrer noopener';\n\t\t} else {\n\t\t\tnode.removeAttribute( 'target' );\n\t\t\tnode.removeAttribute( 'rel' );\n\t\t}\n\t}\n\n\tif (\n\t\tisPhrasingContent( node ) &&\n\t\tnode.hasChildNodes() &&\n\t\tArray.from( node.childNodes ).some( ( child ) => isBlockContent( child, schema ) )\n\t) {\n\t\tunwrap( node );\n\t}\n}\n"]}