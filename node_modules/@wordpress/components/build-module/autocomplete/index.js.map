{"version":3,"sources":["/Users/riad/Workspace/a8c/gutenberg/packages/components/src/autocomplete/index.js"],"names":["classnames","escapeRegExp","find","map","debounce","deburr","Component","renderToString","ENTER","ESCAPE","UP","DOWN","LEFT","RIGHT","SPACE","__","_n","sprintf","withInstanceId","compose","create","slice","insert","isCollapsed","getTextContent","getRectangleFromRange","withFocusOutside","Button","Popover","withSpokenMessages","filterOptions","search","options","maxResults","filtered","i","length","option","keywords","label","isMatch","some","keyword","test","push","getCaretRect","range","window","getSelection","getRangeAt","Autocomplete","selectedIndex","suppress","undefined","open","query","filteredOptions","arguments","bindNode","bind","select","reset","resetWhenSuppressed","handleKeyDown","debouncedLoadOptions","loadOptions","state","constructor","getInitialState","node","replacement","props","record","onChange","end","start","triggerPrefix","toInsert","html","onReplace","getOptionCompletion","isDisabled","completion","value","action","insertCompletion","isMounted","setState","idx","debouncedSpeak","completer","promise","activePromise","Promise","resolve","then","optionsData","keyedOptions","optionData","optionIndex","key","getOptionLabel","getOptionKeywords","isOptionDisabled","announce","event","keyCode","ctrlKey","shiftKey","altKey","metaKey","preventDefault","stopPropagation","nextSelectedIndex","isListening","handler","prevProps","prevState","completers","prevRecord","prevOpen","toggleKeyEvents","text","prevText","textAfterSelection","allCompleters","allowContext","index","lastIndexOf","safeTrigger","match","RegExp","wasOpen","wasSuppress","wasQuery","isDebounced","cancel","children","instanceId","selectedKey","className","isExpanded","listBoxId","activeId"],"mappings":"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","sourcesContent":["/**\n * External dependencies\n */\nimport classnames from 'classnames';\nimport { escapeRegExp, find, map, debounce, deburr } from 'lodash';\n\n/**\n * WordPress dependencies\n */\nimport { Component, renderToString } from '@wordpress/element';\nimport { ENTER, ESCAPE, UP, DOWN, LEFT, RIGHT, SPACE } from '@wordpress/keycodes';\nimport { __, _n, sprintf } from '@wordpress/i18n';\nimport { withInstanceId, compose } from '@wordpress/compose';\nimport {\n\tcreate,\n\tslice,\n\tinsert,\n\tisCollapsed,\n\tgetTextContent,\n} from '@wordpress/rich-text';\nimport { getRectangleFromRange } from '@wordpress/dom';\n\n/**\n * Internal dependencies\n */\nimport withFocusOutside from '../higher-order/with-focus-outside';\nimport Button from '../button';\nimport Popover from '../popover';\nimport withSpokenMessages from '../higher-order/with-spoken-messages';\n\n/**\n * A raw completer option.\n * @typedef {*} CompleterOption\n */\n\n/**\n * @callback FnGetOptions\n *\n * @returns {(CompleterOption[]|Promise.<CompleterOption[]>)} The completer options or a promise for them.\n */\n\n/**\n * @callback FnGetOptionKeywords\n * @param {CompleterOption} option a completer option.\n *\n * @returns {string[]} list of key words to search.\n */\n\n/**\n * @callback FnIsOptionDisabled\n * @param {CompleterOption} option a completer option.\n *\n * @returns {string[]} whether or not the given option is disabled.\n */\n\n/**\n * @callback FnGetOptionLabel\n * @param {CompleterOption} option a completer option.\n *\n * @returns {(string|Array.<(string|Component)>)} list of react components to render.\n */\n\n/**\n * @callback FnAllowNode\n * @param {Node} textNode check if the completer can handle this text node.\n *\n * @returns {boolean} true if the completer can handle this text node.\n */\n\n/**\n * @callback FnAllowContext\n * @param {Range} before the range before the auto complete trigger and query.\n * @param {Range} after the range after the autocomplete trigger and query.\n *\n * @returns {boolean} true if the completer can handle these ranges.\n */\n\n/**\n * @typedef {Object} OptionCompletion\n * @property {('insert-at-caret', 'replace')} action the intended placement of the completion.\n * @property {OptionCompletionValue} value the completion value.\n */\n\n/**\n * A completion value.\n * @typedef {(String|WPElement|Object)} OptionCompletionValue\n */\n\n/**\n * @callback FnGetOptionCompletion\n * @param {CompleterOption} value the value of the completer option.\n * @param {Range} range the nodes included in the autocomplete trigger and query.\n * @param {String} query the text value of the autocomplete query.\n *\n * @returns {(OptionCompletion|OptionCompletionValue)} the completion for the given option. If an\n * \t\t\t\t\t\t\t\t\t\t\t\t\t   OptionCompletionValue is returned, the\n * \t\t\t\t\t\t\t\t\t\t\t\t\t   completion action defaults to `insert-at-caret`.\n */\n\n/**\n * @typedef {Object} Completer\n * @property {String} name a way to identify a completer, useful for selective overriding.\n * @property {?String} className A class to apply to the popup menu.\n * @property {String} triggerPrefix the prefix that will display the menu.\n * @property {(CompleterOption[]|FnGetOptions)} options the completer options or a function to get them.\n * @property {?FnGetOptionKeywords} getOptionKeywords get the keywords for a given option.\n * @property {?FnIsOptionDisabled} isOptionDisabled get whether or not the given option is disabled.\n * @property {FnGetOptionLabel} getOptionLabel get the label for a given option.\n * @property {?FnAllowNode} allowNode filter the allowed text nodes in the autocomplete.\n * @property {?FnAllowContext} allowContext filter the context under which the autocomplete activates.\n * @property {FnGetOptionCompletion} getOptionCompletion get the completion associated with a given option.\n */\n\nfunction filterOptions( search, options = [], maxResults = 10 ) {\n\tconst filtered = [];\n\tfor ( let i = 0; i < options.length; i++ ) {\n\t\tconst option = options[ i ];\n\n\t\t// Merge label into keywords\n\t\tlet { keywords = [] } = option;\n\t\tif ( 'string' === typeof option.label ) {\n\t\t\tkeywords = [ ...keywords, option.label ];\n\t\t}\n\n\t\tconst isMatch = keywords.some( ( keyword ) => search.test( deburr( keyword ) ) );\n\t\tif ( ! isMatch ) {\n\t\t\tcontinue;\n\t\t}\n\n\t\tfiltered.push( option );\n\n\t\t// Abort early if max reached\n\t\tif ( filtered.length === maxResults ) {\n\t\t\tbreak;\n\t\t}\n\t}\n\n\treturn filtered;\n}\n\nfunction getCaretRect() {\n\tconst range = window.getSelection().getRangeAt( 0 );\n\n\tif ( range ) {\n\t\treturn getRectangleFromRange( range );\n\t}\n}\n\nexport class Autocomplete extends Component {\n\tstatic getInitialState() {\n\t\treturn {\n\t\t\tsearch: /./,\n\t\t\tselectedIndex: 0,\n\t\t\tsuppress: undefined,\n\t\t\topen: undefined,\n\t\t\tquery: undefined,\n\t\t\tfilteredOptions: [],\n\t\t};\n\t}\n\n\tconstructor() {\n\t\tsuper( ...arguments );\n\n\t\tthis.bindNode = this.bindNode.bind( this );\n\t\tthis.select = this.select.bind( this );\n\t\tthis.reset = this.reset.bind( this );\n\t\tthis.resetWhenSuppressed = this.resetWhenSuppressed.bind( this );\n\t\tthis.handleKeyDown = this.handleKeyDown.bind( this );\n\t\tthis.debouncedLoadOptions = debounce( this.loadOptions, 250 );\n\n\t\tthis.state = this.constructor.getInitialState();\n\t}\n\n\tbindNode( node ) {\n\t\tthis.node = node;\n\t}\n\n\tinsertCompletion( replacement ) {\n\t\tconst { open, query } = this.state;\n\t\tconst { record, onChange } = this.props;\n\t\tconst end = record.start;\n\t\tconst start = end - open.triggerPrefix.length - query.length;\n\t\tconst toInsert = create( { html: renderToString( replacement ) } );\n\n\t\tonChange( insert( record, toInsert, start, end ) );\n\t}\n\n\tselect( option ) {\n\t\tconst { onReplace } = this.props;\n\t\tconst { open, query } = this.state;\n\t\tconst { getOptionCompletion } = open || {};\n\n\t\tif ( option.isDisabled ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( getOptionCompletion ) {\n\t\t\tconst completion = getOptionCompletion( option.value, query );\n\n\t\t\tconst { action, value } =\n\t\t\t\t( undefined === completion.action || undefined === completion.value ) ?\n\t\t\t\t\t{ action: 'insert-at-caret', value: completion } :\n\t\t\t\t\tcompletion;\n\n\t\t\tif ( 'replace' === action ) {\n\t\t\t\tonReplace( [ value ] );\n\t\t\t} else if ( 'insert-at-caret' === action ) {\n\t\t\t\tthis.insertCompletion( value );\n\t\t\t}\n\t\t}\n\n\t\t// Reset autocomplete state after insertion rather than before\n\t\t// so insertion events don't cause the completion menu to redisplay.\n\t\tthis.reset();\n\t}\n\n\treset() {\n\t\tconst isMounted = !! this.node;\n\n\t\t// Autocompletions may replace the block containing this component,\n\t\t// so we make sure it is mounted before resetting the state.\n\t\tif ( isMounted ) {\n\t\t\tthis.setState( this.constructor.getInitialState() );\n\t\t}\n\t}\n\n\tresetWhenSuppressed() {\n\t\tconst { open, suppress } = this.state;\n\t\tif ( open && suppress === open.idx ) {\n\t\t\tthis.reset();\n\t\t}\n\t}\n\n\thandleFocusOutside() {\n\t\tthis.reset();\n\t}\n\n\tannounce( filteredOptions ) {\n\t\tconst { debouncedSpeak } = this.props;\n\t\tif ( ! debouncedSpeak ) {\n\t\t\treturn;\n\t\t}\n\t\tif ( !! filteredOptions.length ) {\n\t\t\tdebouncedSpeak( sprintf( _n(\n\t\t\t\t'%d result found, use up and down arrow keys to navigate.',\n\t\t\t\t'%d results found, use up and down arrow keys to navigate.',\n\t\t\t\tfilteredOptions.length\n\t\t\t), filteredOptions.length ), 'assertive' );\n\t\t} else {\n\t\t\tdebouncedSpeak( __( 'No results.' ), 'assertive' );\n\t\t}\n\t}\n\n\t/**\n\t * Load options for an autocompleter.\n\t *\n\t * @param {Completer} completer The autocompleter.\n\t * @param {string}    query     The query, if any.\n\t */\n\tloadOptions( completer, query ) {\n\t\tconst { options } = completer;\n\n\t\t/*\n\t\t * We support both synchronous and asynchronous retrieval of completer options\n\t\t * but internally treat all as async so we maintain a single, consistent code path.\n\t\t *\n\t\t * Because networks can be slow, and the internet is wonderfully unpredictable,\n\t\t * we don't want two promises updating the state at once. This ensures that only\n\t\t * the most recent promise will act on `optionsData`. This doesn't use the state\n\t\t * because `setState` is batched, and so there's no guarantee that setting\n\t\t * `activePromise` in the state would result in it actually being in `this.state`\n\t\t * before the promise resolves and we check to see if this is the active promise or not.\n\t\t */\n\t\tconst promise = this.activePromise = Promise.resolve(\n\t\t\ttypeof options === 'function' ? options( query ) : options\n\t\t).then( ( optionsData ) => {\n\t\t\tif ( promise !== this.activePromise ) {\n\t\t\t\t// Another promise has become active since this one was asked to resolve, so do nothing,\n\t\t\t\t// or else we might end triggering a race condition updating the state.\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst keyedOptions = optionsData.map( ( optionData, optionIndex ) => ( {\n\t\t\t\tkey: `${ completer.idx }-${ optionIndex }`,\n\t\t\t\tvalue: optionData,\n\t\t\t\tlabel: completer.getOptionLabel( optionData ),\n\t\t\t\tkeywords: completer.getOptionKeywords ? completer.getOptionKeywords( optionData ) : [],\n\t\t\t\tisDisabled: completer.isOptionDisabled ? completer.isOptionDisabled( optionData ) : false,\n\t\t\t} ) );\n\n\t\t\tconst filteredOptions = filterOptions( this.state.search, keyedOptions );\n\t\t\tconst selectedIndex = filteredOptions.length === this.state.filteredOptions.length ? this.state.selectedIndex : 0;\n\t\t\tthis.setState( {\n\t\t\t\t[ 'options_' + completer.idx ]: keyedOptions,\n\t\t\t\tfilteredOptions,\n\t\t\t\tselectedIndex,\n\t\t\t} );\n\t\t\tthis.announce( filteredOptions );\n\t\t} );\n\t}\n\n\thandleKeyDown( event ) {\n\t\tconst { open, suppress, selectedIndex, filteredOptions } = this.state;\n\t\tif ( ! open ) {\n\t\t\treturn;\n\t\t}\n\t\tif ( suppress === open.idx ) {\n\t\t\tswitch ( event.keyCode ) {\n\t\t\t\t// cancel popup suppression on CTRL+SPACE\n\t\t\t\tcase SPACE:\n\t\t\t\t\tconst { ctrlKey, shiftKey, altKey, metaKey } = event;\n\t\t\t\t\tif ( ctrlKey && ! ( shiftKey || altKey || metaKey ) ) {\n\t\t\t\t\t\tthis.setState( { suppress: undefined } );\n\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t\tevent.stopPropagation();\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t\t// reset on cursor movement\n\t\t\t\tcase UP:\n\t\t\t\tcase DOWN:\n\t\t\t\tcase LEFT:\n\t\t\t\tcase RIGHT:\n\t\t\t\t\tthis.reset();\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\t\tif ( filteredOptions.length === 0 ) {\n\t\t\treturn;\n\t\t}\n\t\tlet nextSelectedIndex;\n\t\tswitch ( event.keyCode ) {\n\t\t\tcase UP:\n\t\t\t\tnextSelectedIndex = ( selectedIndex === 0 ? filteredOptions.length : selectedIndex ) - 1;\n\t\t\t\tthis.setState( { selectedIndex: nextSelectedIndex } );\n\t\t\t\tbreak;\n\n\t\t\tcase DOWN:\n\t\t\t\tnextSelectedIndex = ( selectedIndex + 1 ) % filteredOptions.length;\n\t\t\t\tthis.setState( { selectedIndex: nextSelectedIndex } );\n\t\t\t\tbreak;\n\n\t\t\tcase ESCAPE:\n\t\t\t\tthis.setState( { suppress: open.idx } );\n\t\t\t\tbreak;\n\n\t\t\tcase ENTER:\n\t\t\t\tthis.select( filteredOptions[ selectedIndex ] );\n\t\t\t\tbreak;\n\n\t\t\tcase LEFT:\n\t\t\tcase RIGHT:\n\t\t\t\tthis.reset();\n\t\t\t\treturn;\n\n\t\t\tdefault:\n\t\t\t\treturn;\n\t\t}\n\n\t\t// Any handled keycode should prevent original behavior. This relies on\n\t\t// the early return in the default case.\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\t}\n\n\ttoggleKeyEvents( isListening ) {\n\t\t// This exists because we must capture ENTER key presses before RichText.\n\t\t// It seems that react fires the simulated capturing events after the\n\t\t// native browser event has already bubbled so we can't stopPropagation\n\t\t// and avoid RichText getting the event from TinyMCE, hence we must\n\t\t// register a native event handler.\n\t\tconst handler = isListening ? 'addEventListener' : 'removeEventListener';\n\t\tthis.node[ handler ]( 'keydown', this.handleKeyDown, true );\n\t}\n\n\tcomponentDidUpdate( prevProps, prevState ) {\n\t\tconst { record, completers } = this.props;\n\t\tconst { record: prevRecord } = prevProps;\n\t\tconst { open: prevOpen } = prevState;\n\n\t\tif ( ( ! this.state.open ) !== ( ! prevOpen ) ) {\n\t\t\tthis.toggleKeyEvents( ! ! this.state.open );\n\t\t}\n\n\t\tif ( isCollapsed( record ) ) {\n\t\t\tconst text = deburr( getTextContent( slice( record, 0 ) ) );\n\t\t\tconst prevText = deburr( getTextContent( slice( prevRecord, 0 ) ) );\n\n\t\t\tif ( text !== prevText ) {\n\t\t\t\tconst textAfterSelection = getTextContent( slice( record, undefined, getTextContent( record ).length ) );\n\t\t\t\tconst allCompleters = map( completers, ( completer, idx ) => ( { ...completer, idx } ) );\n\t\t\t\tconst open = find( allCompleters, ( { triggerPrefix, allowContext } ) => {\n\t\t\t\t\tconst index = text.lastIndexOf( triggerPrefix );\n\n\t\t\t\t\tif ( index === -1 ) {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( allowContext && ! allowContext( text.slice( 0, index ), textAfterSelection ) ) {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn /^\\S*$/.test( text.slice( index + triggerPrefix.length ) );\n\t\t\t\t} );\n\n\t\t\t\tif ( ! open ) {\n\t\t\t\t\tthis.reset();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tconst safeTrigger = escapeRegExp( open.triggerPrefix );\n\t\t\t\tconst match = text.match( new RegExp( `${ safeTrigger }(\\\\S*)$` ) );\n\t\t\t\tconst query = match && match[ 1 ];\n\t\t\t\tconst { open: wasOpen, suppress: wasSuppress, query: wasQuery } = this.state;\n\n\t\t\t\tif ( open && ( ! wasOpen || open.idx !== wasOpen.idx || query !== wasQuery ) ) {\n\t\t\t\t\tif ( open.isDebounced ) {\n\t\t\t\t\t\tthis.debouncedLoadOptions( open, query );\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.loadOptions( open, query );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t// create a regular expression to filter the options\n\t\t\t\tconst search = open ? new RegExp( '(?:\\\\b|\\\\s|^)' + escapeRegExp( query ), 'i' ) : /./;\n\t\t\t\t// filter the options we already have\n\t\t\t\tconst filteredOptions = open ? filterOptions( search, this.state[ 'options_' + open.idx ] ) : [];\n\t\t\t\t// check if we should still suppress the popover\n\t\t\t\tconst suppress = ( open && wasSuppress === open.idx ) ? wasSuppress : undefined;\n\t\t\t\t// update the state\n\t\t\t\tif ( wasOpen || open ) {\n\t\t\t\t\tthis.setState( { selectedIndex: 0, filteredOptions, suppress, search, open, query } );\n\t\t\t\t}\n\t\t\t\t// announce the count of filtered options but only if they have loaded\n\t\t\t\tif ( open && this.state[ 'options_' + open.idx ] ) {\n\t\t\t\t\tthis.announce( filteredOptions );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tcomponentWillUnmount() {\n\t\tthis.toggleKeyEvents( false );\n\t\tthis.debouncedLoadOptions.cancel();\n\t}\n\n\trender() {\n\t\tconst { children, instanceId } = this.props;\n\t\tconst { open, suppress, selectedIndex, filteredOptions } = this.state;\n\t\tconst { key: selectedKey = '' } = filteredOptions[ selectedIndex ] || {};\n\t\tconst { className, idx } = open || {};\n\t\tconst isExpanded = suppress !== idx && filteredOptions.length > 0;\n\t\tconst listBoxId = isExpanded ? `components-autocomplete-listbox-${ instanceId }` : null;\n\t\tconst activeId = isExpanded ? `components-autocomplete-item-${ instanceId }-${ selectedKey }` : null;\n\n\t\t// Disable reason: Clicking the editor should reset the autocomplete when the menu is suppressed\n\t\t/* eslint-disable jsx-a11y/no-static-element-interactions, jsx-a11y/onclick-has-role, jsx-a11y/click-events-have-key-events */\n\t\treturn (\n\t\t\t<div\n\t\t\t\tref={ this.bindNode }\n\t\t\t\tonClick={ this.resetWhenSuppressed }\n\t\t\t\tclassName=\"components-autocomplete\"\n\t\t\t>\n\t\t\t\t{ children( { isExpanded, listBoxId, activeId } ) }\n\t\t\t\t{ isExpanded && (\n\t\t\t\t\t<Popover\n\t\t\t\t\t\tfocusOnMount={ false }\n\t\t\t\t\t\tonClose={ this.reset }\n\t\t\t\t\t\tposition=\"top right\"\n\t\t\t\t\t\tclassName=\"components-autocomplete__popover\"\n\t\t\t\t\t\tgetAnchorRect={ getCaretRect }\n\t\t\t\t\t>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tid={ listBoxId }\n\t\t\t\t\t\t\trole=\"listbox\"\n\t\t\t\t\t\t\tclassName=\"components-autocomplete__results\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{ isExpanded && map( filteredOptions, ( option, index ) => (\n\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\tkey={ option.key }\n\t\t\t\t\t\t\t\t\tid={ `components-autocomplete-item-${ instanceId }-${ option.key }` }\n\t\t\t\t\t\t\t\t\trole=\"option\"\n\t\t\t\t\t\t\t\t\taria-selected={ index === selectedIndex }\n\t\t\t\t\t\t\t\t\tdisabled={ option.isDisabled }\n\t\t\t\t\t\t\t\t\tclassName={ classnames( 'components-autocomplete__result', className, {\n\t\t\t\t\t\t\t\t\t\t'is-selected': index === selectedIndex,\n\t\t\t\t\t\t\t\t\t} ) }\n\t\t\t\t\t\t\t\t\tonClick={ () => this.select( option ) }\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{ option.label }\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t) ) }\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</Popover>\n\t\t\t\t) }\n\t\t\t</div>\n\t\t);\n\t\t/* eslint-enable jsx-a11y/no-static-element-interactions, jsx-a11y/onclick-has-role, jsx-a11y/click-events-have-key-events */\n\t}\n}\n\nexport default compose( [\n\twithSpokenMessages,\n\twithInstanceId,\n\twithFocusOutside, // this MUST be the innermost HOC as it calls handleFocusOutside\n] )( Autocomplete );\n"]}