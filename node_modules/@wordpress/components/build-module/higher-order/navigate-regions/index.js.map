{"version":3,"sources":["/Users/riad/Workspace/a8c/gutenberg/packages/components/src/higher-order/navigate-regions/index.js"],"names":["classnames","Component","createHigherOrderComponent","KeyboardShortcuts","WrappedComponent","arguments","bindContainer","bind","focusNextRegion","focusRegion","focusPreviousRegion","onClick","state","isFocusingRegions","ref","container","offset","regions","querySelectorAll","length","nextRegion","selectedIndex","indexOf","document","activeElement","nextIndex","focus","setState","className","props"],"mappings":";;;;;;;;;AAAA;;;AAGA,OAAOA,UAAP,MAAuB,YAAvB;AAEA;;;;AAGA,SAASC,SAAT,QAA0B,oBAA1B;AACA,SAASC,0BAAT,QAA2C,oBAA3C;AAEA;;;;AAGA,OAAOC,iBAAP,MAA8B,0BAA9B;AAEA,eAAeD,0BAA0B,CACxC,UAAEE,gBAAF,EAAwB;AACvB;AAAA;AAAA;AAAA;;AACC,wBAAc;AAAA;;AAAA;;AACb,qFAAUC,SAAV;AACA,cAAKC,aAAL,GAAqB,MAAKA,aAAL,CAAmBC,IAAnB,uDAArB;AACA,cAAKC,eAAL,GAAuB,MAAKC,WAAL,CAAiBF,IAAjB,wDAA6B,CAA7B,CAAvB;AACA,cAAKG,mBAAL,GAA2B,MAAKD,WAAL,CAAiBF,IAAjB,wDAA6B,CAAC,CAA9B,CAA3B;AACA,cAAKI,OAAL,GAAe,MAAKA,OAAL,CAAaJ,IAAb,uDAAf;AACA,cAAKK,KAAL,GAAa;AACZC,UAAAA,iBAAiB,EAAE;AADP,SAAb;AANa;AASb;;AAVF;AAAA;AAAA,sCAYgBC,GAZhB,EAYsB;AACpB,eAAKC,SAAL,GAAiBD,GAAjB;AACA;AAdF;AAAA;AAAA,oCAgBcE,MAhBd,EAgBuB;AACrB,cAAMC,OAAO,sBAAQ,KAAKF,SAAL,CAAeG,gBAAf,CAAiC,iBAAjC,CAAR,CAAb;;AACA,cAAK,CAAED,OAAO,CAACE,MAAf,EAAwB;AACvB;AACA;;AACD,cAAIC,UAAU,GAAGH,OAAO,CAAE,CAAF,CAAxB;AACA,cAAMI,aAAa,GAAGJ,OAAO,CAACK,OAAR,CAAiBC,QAAQ,CAACC,aAA1B,CAAtB;;AACA,cAAKH,aAAa,KAAK,CAAC,CAAxB,EAA4B;AAC3B,gBAAII,SAAS,GAAGJ,aAAa,GAAGL,MAAhC;AACAS,YAAAA,SAAS,GAAGA,SAAS,KAAK,CAAC,CAAf,GAAmBR,OAAO,CAACE,MAAR,GAAiB,CAApC,GAAwCM,SAApD;AACAA,YAAAA,SAAS,GAAGA,SAAS,KAAKR,OAAO,CAACE,MAAtB,GAA+B,CAA/B,GAAmCM,SAA/C;AACAL,YAAAA,UAAU,GAAGH,OAAO,CAAEQ,SAAF,CAApB;AACA;;AAEDL,UAAAA,UAAU,CAACM,KAAX;AACA,eAAKC,QAAL,CAAe;AAAEd,YAAAA,iBAAiB,EAAE;AAArB,WAAf;AACA;AAhCF;AAAA;AAAA,kCAkCW;AACT,eAAKc,QAAL,CAAe;AAAEd,YAAAA,iBAAiB,EAAE;AAArB,WAAf;AACA;AApCF;AAAA;AAAA,iCAsCU;AACR,cAAMe,SAAS,GAAG5B,UAAU,CAAE,6BAAF,EAAiC;AAC5D,mCAAuB,KAAKY,KAAL,CAAWC;AAD0B,WAAjC,CAA5B,CADQ,CAKR;;AACA;;AACA,iBACC;AAAK,YAAA,GAAG,EAAG,KAAKP,aAAhB;AAAgC,YAAA,SAAS,EAAGsB,SAA5C;AAAwD,YAAA,OAAO,EAAG,KAAKjB;AAAvE,aACC,cAAC,iBAAD;AACC,YAAA,UAAU,MADX;AAEC,YAAA,SAAS,EAAG;AACX,wBAAU,KAAKH,eADJ;AAEX,6BAAe,KAAKA,eAFT;AAGX,8BAAgB,KAAKE,mBAHV;AAIX,6BAAe,KAAKA;AAJT;AAFb,YADD,EAUC,cAAC,gBAAD,EAAuB,KAAKmB,KAA5B,CAVD,CADD;AAcA;AACA;AA5DF;;AAAA;AAAA,MAAqB5B,SAArB;AAAA;AA8DA,CAhEuC,EAgErC,iBAhEqC,CAAzC","sourcesContent":["/**\n * External Dependencies\n */\nimport classnames from 'classnames';\n\n/**\n * WordPress Dependencies\n */\nimport { Component } from '@wordpress/element';\nimport { createHigherOrderComponent } from '@wordpress/compose';\n\n/**\n * Internal Dependencies\n */\nimport KeyboardShortcuts from '../../keyboard-shortcuts';\n\nexport default createHigherOrderComponent(\n\t( WrappedComponent ) => {\n\t\treturn class extends Component {\n\t\t\tconstructor() {\n\t\t\t\tsuper( ...arguments );\n\t\t\t\tthis.bindContainer = this.bindContainer.bind( this );\n\t\t\t\tthis.focusNextRegion = this.focusRegion.bind( this, 1 );\n\t\t\t\tthis.focusPreviousRegion = this.focusRegion.bind( this, -1 );\n\t\t\t\tthis.onClick = this.onClick.bind( this );\n\t\t\t\tthis.state = {\n\t\t\t\t\tisFocusingRegions: false,\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tbindContainer( ref ) {\n\t\t\t\tthis.container = ref;\n\t\t\t}\n\n\t\t\tfocusRegion( offset ) {\n\t\t\t\tconst regions = [ ...this.container.querySelectorAll( '[role=\"region\"]' ) ];\n\t\t\t\tif ( ! regions.length ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tlet nextRegion = regions[ 0 ];\n\t\t\t\tconst selectedIndex = regions.indexOf( document.activeElement );\n\t\t\t\tif ( selectedIndex !== -1 ) {\n\t\t\t\t\tlet nextIndex = selectedIndex + offset;\n\t\t\t\t\tnextIndex = nextIndex === -1 ? regions.length - 1 : nextIndex;\n\t\t\t\t\tnextIndex = nextIndex === regions.length ? 0 : nextIndex;\n\t\t\t\t\tnextRegion = regions[ nextIndex ];\n\t\t\t\t}\n\n\t\t\t\tnextRegion.focus();\n\t\t\t\tthis.setState( { isFocusingRegions: true } );\n\t\t\t}\n\n\t\t\tonClick() {\n\t\t\t\tthis.setState( { isFocusingRegions: false } );\n\t\t\t}\n\n\t\t\trender() {\n\t\t\t\tconst className = classnames( 'components-navigate-regions', {\n\t\t\t\t\t'is-focusing-regions': this.state.isFocusingRegions,\n\t\t\t\t} );\n\n\t\t\t\t// Disable reason: Clicking the editor should dismiss the regions focus style\n\t\t\t\t/* eslint-disable jsx-a11y/no-static-element-interactions, jsx-a11y/onclick-has-role, jsx-a11y/click-events-have-key-events */\n\t\t\t\treturn (\n\t\t\t\t\t<div ref={ this.bindContainer } className={ className } onClick={ this.onClick }>\n\t\t\t\t\t\t<KeyboardShortcuts\n\t\t\t\t\t\t\tbindGlobal\n\t\t\t\t\t\t\tshortcuts={ {\n\t\t\t\t\t\t\t\t'ctrl+`': this.focusNextRegion,\n\t\t\t\t\t\t\t\t'shift+alt+n': this.focusNextRegion,\n\t\t\t\t\t\t\t\t'ctrl+shift+`': this.focusPreviousRegion,\n\t\t\t\t\t\t\t\t'shift+alt+p': this.focusPreviousRegion,\n\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<WrappedComponent { ...this.props } />\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\t\t/* eslint-enable jsx-a11y/no-static-element-interactions, jsx-a11y/onclick-has-role, jsx-a11y/click-events-have-key-events */\n\t\t\t}\n\t\t};\n\t}, 'navigateRegions'\n);\n"]}